# 04. uv로 개발 도구 사용하기 (uv tool)

Python 프로젝트를 하다 보면 `black`(코드 포맷터), `ruff`(린터), `mypy`(타입 체커) 등 코드 자체의 의존성은 아니지만 개발에 꼭 필요한 여러 CLI 도구들을 사용하게 됩니다.

기존에는 이런 도구들을 프로젝트의 개발용 의존성(`--dev`)으로 추가하거나, `pipx` 같은 별도의 도구로 관리해야 했습니다. `uv`는 이 기능을 `uv tool`이라는 명령어로 통합하여 제공합니다.

### 학습 목표

-   `uv tool`의 개념과 필요성을 이해합니다.
-   `uvx`를 사용해 프로젝트를 오염시키지 않고 일회성으로 도구를 실행할 수 있습니다.
-   `uv tool install`로 자주 사용하는 도구를 시스템 전역에 설치할 수 있습니다.
-   **`uv run`과 `uvx`의 핵심적인 차이점**을 설명할 수 있습니다.

---

### 1. `uvx`로 도구 임시 실행하기 (권장)

`uvx`는 `uv tool run`의 편리한 단축 명령어입니다.

이 명령어는 `pipx run`과 유사하게, 도구를 **시스템이나 프로젝트에 영구적으로 설치하지 않고** 일회성으로 실행할 때 사용합니다. `uv`는 내부적으로 이 도구만을 위한 임시 가상 환경을 만들고 실행한 뒤, 다음 실행을 위해 결과를 캐싱해 둡니다.

가장 흔하고 권장되는 사용 방식입니다.

#### 예시: `black`으로 코드 포맷팅 실행하기

```bash
# black을 설치하지 않고, 현재 디렉터리의 코드를 검사만 하기
uvx black . --check
```

#### 예시: 특정 버전의 `ruff` 실행하기

`@` 기호를 사용해 원하는 버전을 지정하여 실행할 수 있습니다.

```bash
# 0.5.0 버전의 ruff로 현재 디렉터리 검사하기
uvx ruff@0.5.0 check .
```

---

### 2. `uv tool install`로 도구 영구 설치하기

`ruff`처럼 매우 자주 사용하는 도구는 아예 시스템에 설치해서 터미널 어디서든 `ruff check .`처럼 바로 사용하고 싶을 수 있습니다. 이럴 때 `uv tool install`을 사용합니다.

이 명령어는 `pipx install`과 유사하게, 지정된 도구를 위한 **독립된 가상 환경을 만들고, 해당 환경의 실행 파일들을 사용자의 `PATH`에 추가**해 줍니다.

```bash
uv tool install black
```

이제 터미널을 새로고침하면 어디서든 `black` 명령어를 바로 사용할 수 있습니다.

```bash
# 설치 후에는 uvx 없이 바로 사용 가능
black . --check
```

---

### 3. 가장 중요한 차이점: `uv run` vs `uvx`

두 명령어는 비슷해 보이지만, **실행되는 환경**이 완전히 다릅니다. 이 차이를 이해하는 것이 매우 중요합니다.

-   **`uv run`**: **프로젝트 내부용**
    -   **프로젝트의 가상 환경(`.venv`) 안에서** 명령을 실행합니다.
    -   따라서 `pyproject.toml`에 추가한 패키지(`flask`, `requests`, `pytest` 등)를 `import`하는 스크립트를 실행할 때 사용합니다.
    -   예: `uv run pytest` (프로젝트의 테스트 코드 실행)

-   **`uvx`**: **프로젝트 외부용**
    -   **프로젝트와 완전히 분리된, 격리된 임시 환경에서** 명령을 실행합니다.
    -   프로젝트의 의존성과는 아무 관련이 없는 외부 도구를 코드에 적용할 때 사용합니다.
    -   예: `uvx black .` (프로젝트 의존성과 상관없이 코드 스타일만 검사)

> **요약**: 내 프로젝트에 `add`한 패키지를 사용해야 하면 `uv run`, 그 외의 외부 개발 도구는 `uvx`를 쓴다고 생각하면 쉽습니다.

---

**참고**: [uv 공식 Tools 가이드](https://docs.astral.sh/uv/concepts/tools/)

**다음 세션**: [05. pip 프로젝트를 uv로 마이그레이션하기](../05-migration-from-pip/README.md)
