# 03. 패러다임의 전환: 테스트 주도 개발(TDD) 소개

전통적인 개발 방식에서는 코드를 먼저 작성하고, 그 코드가 잘 작동하는지 나중에 확인(테스트)합니다. 하지만 이런 방식은 종종 우리가 무엇을 만들어야 하는지 명확히 정의하지 않은 채 코딩을 시작하게 만들고, 나중에 테스트하기 어려운 복잡한 코드를 낳기도 합니다.

**테스트 주도 개발(TDD)**은 이 순서를 근본적으로 뒤집는 혁신적인 접근 방식입니다. 실제 기능을 구현하기 전에, 그 기능에 대한 **기대치를 정의하는 실패하는 테스트를 먼저 작성**하는 개발 방법론입니다.

이는 단순히 테스트를 먼저 하는 것을 넘어, 소프트웨어의 설계를 주도하고 코드의 품질을 한 차원 높이는 강력한 개발 철학이자 기술입니다.

### Red-Green-Refactor: TDD의 핵심 엔진

TDD는 'Red-Green-Refactor'라는 짧고 반복적인 주기를 통해 진행됩니다. 이 주기는 한 번에 하나의 작은 기능에 대해 수 분 내에 완료될 정도로 매우 빠릅니다.

#### 1. Red: 실패하는 테스트를 통해 '질문'하기

-   **무엇을 하는가?**: 우리가 추가하려는 새로운 기능이나 수정하려는 로직에 대한 자동화된 테스트 코드를 먼저 작성합니다. 아직 실제 코드는 한 줄도 없으므로, 이 테스트를 실행하면 당연히 **실패**하며 빨간불(Red)이 켜집니다.
-   **왜 중요한가?**: 이 단계는 코드를 작성하기 전에 **"내가 만들려는 코드는 정확히 무엇을 해야 하는가?"**라는 질문을 스스로에게 던지는 과정입니다. 이 테스트는 기능의 요구사항(입력, 출력, 예외 상황 등)을 코드로 명확하게 정의하는 '실행 가능한 명세'가 됩니다. 이 과정을 통해 개발자는 구현해야 할 기능의 범위를 명확히 이해하고, 불필요한 기능을 만들지 않게 됩니다.
    -   *예시: `add(a, b)` 함수를 만든다면, `test_add_positive_numbers()` 라는 테스트를 먼저 만들고 `assert add(2, 3) == 5` 라고 쓰는 것입니다. `add` 함수가 없으니 당연히 에러가 발생합니다.*

#### 2. Green: 최소한의 코드로 '응답'하기

-   **무엇을 하는가?**: 방금 작성한 실패하는 테스트를 **통과**시키는 데 필요한, 가장 간단하고 최소한의 코드를 작성합니다. 목표는 아름답거나 완벽한 코드가 아니라, 오직 빨간불을 녹색불(Green)로 바꾸는 것입니다.
-   **왜 중요한가?**: 이 단계는 개발자가 문제의 본질에만 집중하도록 강제합니다. 때로는 테스트를 통과시키기 위해 값을 하드코딩하는(예: `return 5`) 극단적으로 간단한 방법을 사용하기도 합니다. 이는 "과도한 엔지니어링(over-engineering)"을 방지하고, 다음 단계(실패하는 다음 테스트 작성)를 통해 코드를 점진적으로 일반화하도록 유도하는 TDD의 독특한 특징입니다.
    -   *예시: `def add(a, b): return a + b` 라는 간단한 코드를 작성하여 위 테스트를 통과시킵니다.*

#### 3. Refactor: 안전하게 '개선'하기

-   **무엇을 하는가?**: 이제 모든 테스트가 녹색불인, 즉 시스템이 안정적인 상태입니다. 이 '안전망' 위에서 우리는 안심하고 코드의 품질을 개선할 수 있습니다. 중복된 코드를 제거하고, 변수 이름을 더 명확하게 바꾸고, 복잡한 로직을 더 작은 함수로 분리하는 등의 활동을 합니다. 리팩토링을 할 때마다 전체 테스트를 다시 실행하여, 개선 작업이 기존의 어떤 기능도 망가뜨리지 않았음을 끊임없이 확인합니다.
-   **왜 중요한가?**: TDD의 진정한 마법이 일어나는 단계입니다. 테스트라는 든든한 보험이 있기 때문에, 개발자는 레거시 코드를 건드리길 두려워하는 대신, 언제든지 코드를 더 깨끗하고 효율적으로 만들 수 있는 자신감을 얻게 됩니다. 이는 시간이 지나도 소프트웨어가 유연하고 건강한 상태를 유지하게 하는 핵심 동력입니다.
    -   *예시: `add` 함수는 이미 충분히 단순하므로 리팩토링이 필요 없을 수 있습니다. 하지만 더 복잡한 로직이었다면 이 단계에서 코드를 정리합니다.*

### TDD가 가져다주는 강력한 이점들

-   **설계 개선**: 코드를 테스트하기 쉽게 만들려면, 자연스럽게 각 기능이 작고, 하나의 책임만 가지며, 다른 부분과 느슨하게 연결된(Decoupled) 구조를 갖게 됩니다. TDD는 의식하지 않아도 좋은 설계 원칙을 따르도록 개발자를 유도하는 훌륭한 가이드입니다.
-   **자신감 향상**: TDD를 통해 구축된 촘촘한 테스트 스위트는 개발자에게 엄청난 자신감을 줍니다. 내가 작성한 코드가 수많은 엣지 케이스를 커버하고 있으며, 새로운 변경사항이 기존 시스템을 망가뜨리지 않았다는 것을 코드가 코드로 증명해주기 때문입니다.
-   **살아있는 문서**: 잘 작성된 테스트 코드들은 그 자체로 시스템의 기능과 사용법을 알려주는 가장 정확하고 항상 최신 상태를 유지하는 문서가 됩니다. 주석이나 별도의 문서는 시간이 지나면 실제 코드와 달라지기 쉽지만, 테스트는 코드와 함께 변경되지 않으면 실패하기 때문입니다.

TDD는 처음에는 어색하고 느리게 느껴질 수 있습니다. 하지만 이 주기에 익숙해지면, 코딩을 시작하기 전에 생각을 정리하고, 디버깅에 쏟는 시간을 극적으로 줄이며, 장기적으로 유지보수하기 좋은 고품질의 소프트웨어를 만드는 가장 빠르고 효과적인 방법 중 하나임을 깨닫게 될 것입니다.

---
**다음 파트**: [Part 2. '무엇으로' 할 것인가: 새로운 도구, pytest](../../02-intro-to-pytest/01-why-pytest/README.md)
